<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Giphy API homework</title>
  </head>

<body>
   <!-- <button data-animal="dachsund">dachshund</button>
    <button data-animal="dog">dog</button>
    <button data-animal="fox">fox</button>
    <button data-animal="coyote">coyote</button>
    <button data-animal="werewolf">werewolf</button>
    -->

    <div id='NewButtonsHere'></div>
    
    <br>

    <form id='AnimalSearch'>
        <label for='AnimalInput'>add an animal to the list</label>
        <input type='text' id='AnimalInput'>
        <input id='SearchAnimal' type='submit' value='search animal'>
    </form>

    <div id='NewsGifsHere'></div>
    <div id="GifsHere"></div>
   
   

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">

        var animalArray = ["dachshund", "dog", "fox", "coyote", "werewolf"];

        function createButton() {
            $('#NewButtonsHere').empty();

            for (var i = 0; i < animalArray.length; i++)  {
                var x = $("<button>");
                    x.addClass("Animal");
                    x.attr('data-animal', animalArray[i]);
                    x.text(animalArray[i]);
                    $('#NewButtonsHere').append(x);
            }
        }

        $('#SearchAnimal').on('click', function(event) {
            event.preventDefault();
            var newAnimal = $('#AnimalInput').val().trim();
            animalArray.push(newAnimal);
            
            createButton();
        });
        
            createButton();

        $('button').on('click', function() {

            var animal = $(this).attr('data-animal');

            var queryURL = "https://api.giphy.com/v1/gifs/search?q=" +
            animal + "&api_key=hVhyMFSUZ642JM6Hzv5ek7FbAhILnWSB&limit=10";
        
            $.ajax({
                url: queryURL,
                method: 'GET'
            }) 
            
                .then(function(response) {
                    console.log(response);
                    var results = response.data;

                    for (var i = 0; i < results.length; i++) {
                        var gifDisplay = $('<div>');

                        var rating = results[i].rating;
                        var ratingDisplay = $('<p>').text('Rating: ' + rating);
                    
                        var animalDisplay = $('<img>');
                        animalDisplay.attr('src', results[i].images.original.url);

                        gifDisplay.append(ratingDisplay);
                        gifDisplay.append(animalDisplay);

                        $('#GifsHere').prepend(gifDisplay);

                    }
                })
        });

    </script>
    
</body>
</html>