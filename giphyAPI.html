<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Giphy API homework</title>
  </head>

<body>

    <div id='NewButtonsHere'></div>
    
    <br>

    <form id='AnimalSearch'>
        <label for='AnimalInput'>add an animal to the list</label>
        <input type='text' id='AnimalInput'>
        <input id='btnSearchAnimal' type='submit' value='search animal'>
    </form>

<!-- gifs appear here -->
   
    <div id="GifsHere"></div>
   
   

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">

        var topicsArray = ["dachshund", "dog", "fox", "coyote", "werewolf"];

    // values assigned to the newly created button
        function createButton() {
            $('#NewButtonsHere').empty();
            for (var i = 0; i < topicsArray.length; i++)  {
                var x = $("<button>");
                    x.addClass("NewAnimalBtn");
                    x.attr('data-animal', topicsArray[i]);
                    x.text(topicsArray[i]);
                    $('#NewButtonsHere').append(x);
            }
        }
    
    // gathers value from search input and creates new topic button
        $('#btnSearchAnimal').on('click', function(event) {
            event.preventDefault();
            var newAnimal = $('#AnimalInput').val();
            topicsArray.push(newAnimal);
            
            createButton();
        });
        
            createButton();

    // assigns a function to the newly created button
        $('.NewAnimalBtn').on('click', function() {
          
            var animal = $(this).attr('data-animal');
            var queryURL = "https://api.giphy.com/v1/gifs/search?q=" +
            animal + "&api_key=hVhyMFSUZ642JM6Hzv5ek7FbAhILnWSB&limit=10";
        
            $.ajax({
                url: queryURL,
                method: "GET"
            }) 
            
                .then(function(response) {
                    console.log(response);
                    var results = response.data;
                    for (var i = 0; i < topicsArray.length; i++) {
                        var gifDisplay = $('<div>');
                        var rating = results[i].rating;
                        var ratingDisplay = $('<p>').text('Rating: ' + rating);
                    
                        var animalDisplay = $('<img>');
                        animalDisplay.attr('src', results[i].images.original.url);
                        gifDisplay.append(ratingDisplay);
                        gifDisplay.append(animalDisplay);
                        $('#GifsHere').prepend(gifDisplay);
                    }
                })
        });
    </script>
    
</body>
</html>